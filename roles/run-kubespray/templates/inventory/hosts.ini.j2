
# Resource
#   https://github.com/kubernetes-incubator/kubespray/blob/master/inventory/sample/hosts.ini

# HOSTS
[all]
{% for host in groups['k8s-cluster'] %}
{% if hostvars[host].maas_owner_data is defined %}
{{ host }} ansible_ssh_host={{ host }} ip={{ hostvars[host].maas_owner_data.data_plane_ip }}
{% elif ( hostvars[ groups['kube-master'][0] ].ansible_distribution == 'CentOS' ) and ( ansible_user == 'vagrant' ) %}
{{ host }} ansible_ssh_host={{ host }} ip={{ hostvars[host]['ansible_eth2']['ipv4']['address'] }}
{% elif ( hostvars[ groups['kube-master'][0] ].ansible_distribution == 'Ubuntu' ) and ( ansible_user == 'vagrant' ) %}
{{ host }} ansible_ssh_host={{ host }} ip={{ hostvars[host]['ansible_enp0s9']['ipv4']['address'] }}
{% else %}
{{ host }} ansible_ssh_host={{ host }} ip={{ hostvars[host]['ansible_default_ipv4']['address'] }}
{% endif %}
{% endfor %}

# GROUPS

[kube-master]
{% for host in groups['kube-master'] %}
{{ host }}
{% endfor %}

[kube-node]
{% for host in groups['kube-node'] %}
{{ host }}
{% endfor %}

[etcd]
{% for host in groups['etcd'] %}
{{ host }}
{% endfor %}

[k8s-cluster]
{% for host in groups['k8s-cluster'] %}
{{ host }}
{% endfor %}

[vault]
{% for host in groups['vault'] %}
{{ host }}
{% endfor %}

[kube-ingress]
{% for host in groups['kube-ingress'] %}
{{ host }}
{% endfor %}

